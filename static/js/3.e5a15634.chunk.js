(this["webpackJsonpflexmoney-google-places"]=this["webpackJsonpflexmoney-google-places"]||[]).push([[3],{13:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},s=Object.keys(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(o=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(c){r=!0,s=c}finally{try{o||null==a.return||a.return()}finally{if(r)throw s}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(t);var u=n(1);function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?g(e):t}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p(e);if(t){var r=p(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h(this,n)}}var v=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t.forEach((function(e){return e&&e.apply(void 0,n)}))}},b=function(e){return"object"===typeof e&&null!==e},y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,o,r=m(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).init=function(){if(!window.google)throw new Error("[flexmoney-google-places-demo] Google Maps JavaScript API library must be loaded");if(!window.google.maps.places)throw new Error("[flexmoney-google-places-demo] Google Maps Places library must be loaded. Please add `libraries=places` to the src URL.");t.autocompleteService=new window.google.maps.places.AutocompleteService,t.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,t.setState((function(e){return e.ready?null:{ready:!0}}))},t.autocompleteCallback=function(e,n){if(t.setState({loading:!1}),n===t.autocompleteOK){var o=t.props.highlightFirstSuggestion;t.setState({suggestions:e.map((function(e,t){return{id:e.id,description:e.description,placeId:e.place_id,active:!(!o||0!==t),index:t,formattedSuggestion:(n=e.structured_formatting,{mainText:n.main_text,secondaryText:n.secondary_text}),matchedSubstrings:e.matched_substrings,terms:e.terms,types:e.types};var n}))})}else t.props.onError(n,t.clearSuggestions)},t.fetchPredictions=function(){var e=t.props.value;e.length&&(t.setState({loading:!0}),t.autocompleteService.getPlacePredictions(s(s({},t.props.searchOptions),{},{input:e}),t.autocompleteCallback))},t.clearSuggestions=function(){t.setState({suggestions:[]})},t.clearActive=function(){t.setState({suggestions:t.state.suggestions.map((function(e){return s(s({},e),{},{active:!1})}))})},t.handleSelect=function(e,n,o){t.clearSuggestions(),t.props.onSelect?t.props.onSelect(e,n,o):t.props.onChange(e)},t.getActiveSuggestion=function(){return t.state.suggestions.find((function(e){return e.active}))},t.selectActiveAtIndex=function(e){var n=t.state.suggestions.find((function(t){return t.index===e})).description;t.setActiveAtIndex(e),t.props.onChange(n)},t.selectUserInputValue=function(){t.clearActive(),t.props.onChange(t.state.userInputValue)},t.handleEnterKey=function(){var e=t.getActiveSuggestion();void 0===e?t.handleSelect(t.props.value,null,null):t.handleSelect(e.description,e.placeId,e)},t.handleDownKey=function(){if(0!==t.state.suggestions.length){var e=t.getActiveSuggestion();void 0===e?t.selectActiveAtIndex(0):e.index===t.state.suggestions.length-1?t.selectUserInputValue():t.selectActiveAtIndex(e.index+1)}},t.handleUpKey=function(){if(0!==t.state.suggestions.length){var e=t.getActiveSuggestion();void 0===e?t.selectActiveAtIndex(t.state.suggestions.length-1):0===e.index?t.selectUserInputValue():t.selectActiveAtIndex(e.index-1)}},t.handleInputKeyDown=function(e){switch(e.key){case"Enter":e.preventDefault(),t.handleEnterKey();break;case"ArrowDown":e.preventDefault(),t.handleDownKey();break;case"ArrowUp":e.preventDefault(),t.handleUpKey();break;case"Escape":t.clearSuggestions()}},t.setActiveAtIndex=function(e){t.setState({suggestions:t.state.suggestions.map((function(t,n){return s(s({},t),{},n===e?{active:!0}:{active:!1})}))})},t.handleInputChange=function(e){var n=e.target.value;t.props.onChange(n),t.setState({userInputValue:n}),n?t.props.shouldFetchSuggestions&&t.debouncedFetchPredictions():t.clearSuggestions()},t.handleInputOnBlur=function(){t.mousedownOnSuggestion||t.clearSuggestions()},t.getActiveSuggestionId=function(){var e=t.getActiveSuggestion();return e?"PlacesAutocomplete__suggestion-".concat(e.placeId):void 0},t.getIsExpanded=function(){return t.state.suggestions.length>0},t.getInputProps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.hasOwnProperty("value"))throw new Error("[flexmoney-google-places-demo] getInputProps does not accept `value`. Use `value` prop instead");if(e.hasOwnProperty("onChange"))throw new Error("[flexmoney-google-places-demo] getInputProps does not accept `onChange`. Use `onChange` prop instead");var n={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":t.getIsExpanded(),"aria-activedescendant":t.getActiveSuggestionId(),disabled:!t.state.ready};return s(s(s({},n),e),{},{onKeyDown:v(t.handleInputKeyDown,e.onKeyDown),onBlur:v(t.handleInputOnBlur,e.onBlur),value:t.props.value,onChange:function(e){t.handleInputChange(e)}})},t.getSuggestionItemProps=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.handleSuggestionMouseEnter.bind(g(t),e.index),r=t.handleSuggestionClick.bind(g(t),e);return s(s({},n),{},{key:e.id,id:t.getActiveSuggestionId(),role:"option",onMouseEnter:v(o,n.onMouseEnter),onMouseLeave:v(t.handleSuggestionMouseLeave,n.onMouseLeave),onMouseDown:v(t.handleSuggestionMouseDown,n.onMouseDown),onMouseUp:v(t.handleSuggestionMouseUp,n.onMouseUp),onTouchStart:v(t.handleSuggestionTouchStart,n.onTouchStart),onTouchEnd:v(t.handleSuggestionMouseUp,n.onTouchEnd),onClick:v(r,n.onClick)})},t.handleSuggestionMouseEnter=function(e){t.setActiveAtIndex(e)},t.handleSuggestionMouseLeave=function(){t.mousedownOnSuggestion=!1,t.clearActive()},t.handleSuggestionMouseDown=function(e){e.preventDefault(),t.mousedownOnSuggestion=!0},t.handleSuggestionTouchStart=function(){t.mousedownOnSuggestion=!0},t.handleSuggestionMouseUp=function(){t.mousedownOnSuggestion=!1},t.handleSuggestionClick=function(e,n){n&&n.preventDefault&&n.preventDefault();var o=e.description,r=e.placeId;t.handleSelect(o,r,e),setTimeout((function(){t.mousedownOnSuggestion=!1}))},t.state={loading:!1,suggestions:[],userInputValue:e.value,ready:!e.googleCallbackName},t.debouncedFetchPredictions=function(e,t){var n;return function(){var o=this,r=arguments;clearTimeout(n),n=setTimeout((function(){return e.apply(o,r)}),t)}}(t.fetchPredictions,e.debounce),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;e?window.google&&window.google.maps&&window.google.maps.places?this.init():window[e]=this.init:this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}])&&l(t.prototype,n),o&&l(t,o),i}(n.n(u).a.Component);y.defaultProps={searchOptions:{},debounce:300,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};var j=y,S=n(0),w=["latLng","name","formatted_address"],O=Object(u.memo)((function(e){var t=c(Object(u.useState)({address:"",formatted_address:"",selectionDetails:"",errorMessage:"",latitude:null,longitude:null,isGeocoding:!1}),2),n=t[0],o=t[1],r=function(){o({address:"",latitude:null,longitude:null})},a=n.address,l=n.errorMessage,g=n.latitude,d=n.longitude,p=n.isGeocoding,f=n.formatted_address,h=n.selectionDetails;return Object(S.jsx)("div",{children:Object(S.jsxs)("div",{children:[Object(S.jsx)(j,{onChange:function(e){o({address:e,latitude:null,longitude:null,errorMessage:""})},value:a,onSelect:function(e){o({isGeocoding:!0,address:e}),function(e){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise((function(o,r){t.geocode({address:e},(function(e,t){t!==n&&r(t),o(e)}))}))}(e).then((function(e){return t=e[0],new Promise((function(e,n){try{var o={lat:t.geometry.location.lat(),lng:t.geometry.location.lng()};e(s(s({},t),{},{latLng:o,placeId:t.place_id}))}catch(r){n(r)}}));var t})).then((function(e){return console.log(e),function(e){var t=new window.google.maps.places.PlacesService(document.createElement("div"));return e.place_id?new Promise((function(n,o){t.getDetails(e,(function(t,r){"OK"!==r&&o(r),n(s(s({},e),{},{results:t}))}))})):(console.error("placeId is missing"),Promise.reject("placeId is missing"))}(e)})).then((function(e){var t=e.latLng,n=t.lat,r=t.lng,s=e.name,a=e.formatted_address,c=i(e,w);o({latitude:n,longitude:r,isGeocoding:!1,formatted_address:s+" "+a,selectionDetails:c})})).catch((function(e){o({isGeocoding:!1}),console.log("error",e)}))},onError:function(e,t){console.log("Error from Google Maps API",e),o({errorMessage:e},(function(){t()}))},shouldFetchSuggestions:a&&a.length>2,children:function(e){var t=e.getInputProps,n=e.suggestions,o=e.getSuggestionItemProps;return Object(S.jsxs)("div",{className:"fm_gp___search-bar-container",children:[Object(S.jsxs)("div",{className:"fm_gp___search-input-container",children:[Object(S.jsx)("input",s({},t({placeholder:"Search Places...",className:"fm_gp___search-input"}))),a&&a.length>0&&Object(S.jsx)("button",{className:"fm_gp___clear-button",onClick:r,children:"x"})]}),n&&n.length>0&&Object(S.jsxs)("div",{className:"fm_gp___autocomplete-container",children:[n.map((function(e){var t=function(){for(var e=[],t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.forEach((function(t){if("string"===typeof t)e.push(t);else{if(!b(t))throw new Error("`classnames` only accepts string or object as arguments");Object.keys(t).forEach((function(n){t[n]&&e.push(n)}))}})),e.join(" ")}("fm_gp___suggestion-item",{"fm_gp___suggestion-item--active":e.active});return Object(S.jsxs)("div",s(s({},o(e,{className:t})),{},{children:[Object(S.jsx)("strong",{children:e.formattedSuggestion.mainText})," ",Object(S.jsx)("small",{children:e.formattedSuggestion.secondaryText})]}))})),Object(S.jsx)("div",{className:"fm_gp___dropdown-footer",children:Object(S.jsx)("div",{})})]})]})}}),l&&l.length>0&&Object(S.jsx)("div",{className:"fm_gp___error-message",children:l}),(g&&d||p)&&Object(S.jsxs)("div",{children:[Object(S.jsx)("h3",{className:"fm_gp___geocode-result-header",children:"Geocode result"}),p?Object(S.jsx)("div",{children:Object(S.jsx)("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw fm_gp___spinner"})}):Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"fm_gp___geocode-result-item--lat",children:[Object(S.jsx)("label",{children:"Name:"}),Object(S.jsx)("span",{children:f})]}),Object(S.jsxs)("div",{className:"fm_gp___geocode-result-item--lat",children:[Object(S.jsx)("label",{children:"Latitude:"}),Object(S.jsx)("span",{children:g})]}),Object(S.jsxs)("div",{className:"fm_gp___geocode-result-item--lng",children:[Object(S.jsx)("label",{children:"Longitude:"}),Object(S.jsx)("span",{children:d})]}),Object(S.jsx)("div",{className:"fm_gp___geocode-result-item--lng",children:Object(S.jsxs)("details",{children:[Object(S.jsx)("summary",{children:"Summary"}),Object(S.jsx)("pre",{children:JSON.stringify(h)})]})})]})]})]})})}));t.default=O}}]);
//# sourceMappingURL=3.e5a15634.chunk.js.map